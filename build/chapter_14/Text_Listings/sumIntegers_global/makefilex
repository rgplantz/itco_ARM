# Build sumIntsGlobal program

objects = sumIntsGlobal.o addTwoGlobal.o
cflags = -O0 -Wall -masm=intel -g
genasm = -O0 -Wall -masm=intel -fno-asynchronous-unwind-tables \
-fcf-protection=none

sumIntsGlobal: $(objects)
	gcc -o sumIntsGlobal $(objects)

sumIntsGlobal.o: sumIntsGlobal.c addTwoGlobal.h
	gcc -c $(cflags) sumIntsGlobal.c

addTwoGlobal.o: addTwoGlobal.c addTwoGlobal.h
	gcc -c $(cflags) addTwoGlobal.c

sumIntsGlobal.s: sumIntsGlobal.c addTwoGlobal.h
	gcc -S $(genasm) -o temp sumIntsGlobal.c
	expand -t 8 temp > sumIntsGlobal.s
	rm temp

addTwoGlobal.s: addTwoGlobal.c addTwoGlobal.h
	gcc -S $(genasm) -o temp addTwoGlobal.c
	expand -t 8 temp > addTwoGlobal.s
	rm temp

.PHONY: clean allclean
clean:
	rm *~ *.o

allclean:
	rm *~ *.o sumIntsGlobal
